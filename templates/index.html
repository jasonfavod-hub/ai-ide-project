<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI IDE - Intelligent Development Environment</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <!-- Monaco Editor -->
    <link rel="stylesheet" data-name="vs/editor/editor.main" href="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/editor/editor.main.min.css">
</head>
<body>
    <!-- Background Overlay -->
    <div class="background-overlay"></div>

    <!-- Header -->
    <header class="glass-panel">
        <div class="header-left">
            <h1><span class="logo-icon">‚ö°</span> AI IDE</h1>
        </div>
        <div class="header-center">
            <div class="status-indicator">
                <span class="status-dot"></span>
                <span class="status-text" data-en="Ready" data-ar="ÿ¨ÿßŸáÿ≤">Ready</span>
            </div>
        </div>
        <div class="header-right">
            <button class="icon-button" id="dirToggle" title="Toggle RTL/LTR">
                <span>‚áÑ</span>
            </button>
            <button class="icon-button" id="themeToggle" title="Toggle Theme">
                <span class="theme-icon">üåô</span>
            </button>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Editor Section -->
        <div class="editor-section">
            <!-- Editor Controls -->
            <div class="controls-panel glass-panel">
                <div class="controls-left">
                    <button class="btn btn-primary" id="runBtn" title="Run code (Ctrl+Enter)">
                        <span>‚ñ∂</span>
                        <span data-en="Run" data-ar="ÿ™ÿ¥ÿ∫ŸäŸÑ">Run</span>
                    </button>
                    <button class="btn btn-secondary" id="clearCodeBtn" title="Clear code (Ctrl+Shift+K)">
                        <span>üóë</span>
                        <span data-en="Clear Code" data-ar="ŸÖÿ≥ÿ≠ ÿßŸÑŸÉŸàÿØ">Clear Code</span>
                    </button>
                </div>
                <div class="controls-right">
                    <span class="language-badge">Python</span>
                </div>
            </div>

            <!-- Code Editor -->
            <div class="editor-container glass-panel">
                <div id="monacoEditor"></div>
            </div>

            <!-- Runtime Inputs -->
            <div class="inputs-section glass-panel">
                <label class="section-label" data-en="Runtime Inputs (one per line)" data-ar="ŸÖÿØÿÆŸÑÿßÿ™ ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ (Ÿàÿßÿ≠ÿØ ŸÑŸÉŸÑ ÿ≥ÿ∑ÿ±)">Runtime Inputs (one per line)</label>
                <textarea id="runtimeInputs" placeholder="Enter inputs here, one per line..."></textarea>
            </div>

            <!-- Output Console -->
            <div class="output-section glass-panel">
                <div class="output-header">
                    <label class="section-label" data-en="Output Console" data-ar="Ÿàÿ≠ÿØÿ© ÿßŸÑÿ•ÿÆÿ±ÿßÿ¨">Output Console</label>
                    <button class="btn-icon" id="clearOutputBtn" title="Clear Output">
                        <span>‚úï</span>
                    </button>
                </div>
                <pre id="outputConsole"></pre>
            </div>
        </div>

        <!-- Resizer -->
        <div class="resizer" id="resizer"></div>

        <!-- AI Section -->
        <div class="ai-section">
            <!-- AI Controls -->
            <div class="ai-controls glass-panel">
                <h2 class="ai-title">
                    <span>ü§ñ</span>
                    <span data-en="AI Assistant" data-ar="ÿßŸÑŸÖÿ≥ÿßÿπÿØ ÿßŸÑÿ∞ŸÉŸä">AI Assistant</span>
                </h2>
            </div>

            <!-- AI Action Buttons -->
            <div class="ai-actions glass-panel">
                <button class="btn btn-ai" data-action="generate_code" title="Describe what you want and AI writes the code">
                    <span>‚ú®</span>
                    <span data-en="Generate Code" data-ar="ÿ™ŸàŸÑŸäÿØ ÿßŸÑŸÉŸàÿØ">Generate Code</span>
                </button>
                <button class="btn btn-ai" data-action="check_and_fix" title="AI finds and fixes errors in your code">
                    <span>üîß</span>
                    <span data-en="Check & Fix" data-ar="ŸÅÿ≠ÿµ Ÿàÿ•ÿµŸÑÿßÿ≠">Check & Fix</span>
                </button>
                <button class="btn btn-ai" data-action="improve_code" title="AI improves code quality and efficiency">
                    <span>‚ö°</span>
                    <span data-en="Improve Code" data-ar="ÿ™ÿ≠ÿ≥ŸäŸÜ ÿßŸÑŸÉŸàÿØ">Improve Code</span>
                </button>
            </div>

            <!-- AI Prompt Input -->
            <div class="ai-prompt glass-panel">
                <label class="section-label" data-en="AI Prompt" data-ar="ÿ∑ŸÑÿ® ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä">AI Prompt</label>
                <textarea id="aiPrompt" placeholder="Describe what you want the AI to do..."></textarea>
                <button class="btn btn-primary" id="sendPromptBtn" title="Send your request to AI">
                    <span>üí¨</span>
                    <span data-en="Send" data-ar="ÿ•ÿ±ÿ≥ÿßŸÑ">Send</span>
                </button>
            </div>

            <!-- AI Output -->
            <div class="ai-output-section glass-panel">
                <div class="output-header">
                    <label class="section-label" data-en="AI Response" data-ar="ÿßÿ≥ÿ™ÿ¨ÿßÿ®ÿ© ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä">AI Response</label>
                    <button class="btn-icon" id="clearAiOutputBtn" title="Clear AI Output">
                        <span>‚úï</span>
                    </button>
                </div>
                <div id="aiOutput" class="ai-output-content"></div>
            </div>

            <!-- Chat History -->
            <div class="chat-history glass-panel">
                <label class="section-label" data-en="Chat History" data-ar="ÿ≥ÿ¨ŸÑ ÿßŸÑŸÖÿ≠ÿßÿØÿ´ÿ©">Chat History</label>
                <div id="chatHistory" class="chat-content"></div>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <p data-en="Processing..." data-ar="ÿ¨ÿßÿ±Ÿä ÿßŸÑŸÖÿπÿßŸÑÿ¨ÿ©...">Processing...</p>
    </div>

    <!-- Help Guide -->
    <div class="help-panel">
        <button class="help-trigger" id="helpTrigger" title="ÿØŸÑŸäŸÑ ÿßŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖ / Usage Guide">‚ùì</button>
    </div>
    <div class="help-modal" id="helpModal">
        <div class="help-content glass-panel">
            <h2 data-en="üìñ Quick Usage Guide" data-ar="üìñ ÿØŸÑŸäŸÑ ÿßŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖ ÿßŸÑÿ≥ÿ±Ÿäÿπ">üìñ Quick Usage Guide</h2>
            <p data-en="Write Python code and click ‚ñ∂ Run to execute" data-ar="ÿßŸÉÿ™ÿ® ŸÉŸàÿØ Python Ÿàÿßÿ∂ÿ∫ÿ∑ ‚ñ∂ ÿ™ÿ¥ÿ∫ŸäŸÑ ŸÑŸÑÿ™ŸÜŸÅŸäÿ∞">Write Python code and click ‚ñ∂ Run to execute</p>
            <ul>
                <li><span class="step-num">1</span><span data-en="Write your code in the editor" data-ar="ÿßŸÉÿ™ÿ® ŸÉŸàÿØŸÉ ŸÅŸä ÿßŸÑŸÖÿ≠ÿ±ÿ±">Write your code in the editor</span></li>
                <li><span class="step-num">2</span><span data-en="(Optional) Add inputs in Runtime Inputs" data-ar="(ÿßÿÆÿ™Ÿäÿßÿ±Ÿä) ÿ£ÿ∂ŸÅ ŸÖÿØÿÆŸÑÿßÿ™ ŸÅŸä ŸÖÿØÿÆŸÑÿßÿ™ ÿßŸÑÿ™ÿ¥ÿ∫ŸäŸÑ">(Optional) Add inputs in Runtime Inputs</span></li>
                <li><span class="step-num">3</span><span data-en="Press ‚ñ∂ Run or Ctrl+Enter" data-ar="ÿßÿ∂ÿ∫ÿ∑ ‚ñ∂ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿ£Ÿà Ctrl+Enter">Press ‚ñ∂ Run or Ctrl+Enter</span></li>
                <li><span class="step-num">4</span><span data-en="For AI: Select action then write your request" data-ar="ŸÑŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä: ÿßÿÆÿ™ÿ± ÿ•ÿ¨ÿ±ÿßÿ° ÿ´ŸÖ ÿßŸÉÿ™ÿ® ÿßŸÑÿ∑ŸÑÿ®">For AI: Select action then write your request</span></li>
            </ul>
            <h3 data-en="Keyboard Shortcuts" data-ar="ÿßÿÆÿ™ÿµÿßÿ±ÿßÿ™ ŸÑŸàÿ≠ÿ© ÿßŸÑŸÖŸÅÿßÿ™Ÿäÿ≠">Keyboard Shortcuts</h3>
            <ul>
                <li><span class="shortcut">Ctrl+Enter</span> <span data-en="Run code" data-ar="ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÉŸàÿØ">Run code</span></li>
                <li><span class="shortcut">Ctrl+Shift+K</span> <span data-en="Clear code" data-ar="ŸÖÿ≥ÿ≠ ÿßŸÑŸÉŸàÿØ">Clear code</span></li>
                <li><span class="shortcut">Ctrl+Shift+L</span> <span data-en="Clear output" data-ar="ŸÖÿ≥ÿ≠ ÿßŸÑÿ•ÿÆÿ±ÿßÿ¨">Clear output</span></li>
            </ul>
            <button class="help-close" id="helpClose" data-en="Got it ‚úì" data-ar="ŸÅŸáŸÖÿ™ ‚úì">Got it ‚úì</button>
        </div>
    </div>

    <!-- Monaco Editor Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>